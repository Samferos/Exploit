extends Camera2D

var target
onready var HP = get_child(1)
export var smoothness = 2.0
onready var hp0 = load("res://Sprites/HearT0.png")
onready var hp1 = load("res://Sprites/HearT1.png")
onready var hp2 = load("res://Sprites/HearT2.png")
onready var hp3 = load("res://Sprites/HearT3.png")

func _ready():
	pass

func _process(_delta):
	if get_node_or_null("../Player") != null:
		target = get_node("../Player")
		var wanted_position = (target.position - position) / 10
		position = wanted_position + position
		zoom = Vector2(0.2,0.2)
		yield(get_tree(),"idle_frame")
	else:
		offset = Vector2.ZERO
		zoom = Vector2(0.5,0.5)
	if target.get("health") == 3:
		HP.set("texture", hp3)
	elif target.get("health") == 2:
		HP.set("texture", hp2)
	elif target.get("health") == 1:
		HP.set("texture", hp1)
	elif target.get("health") <= 0:
		HP.set("texture", hp0)

func CameraShake(Shakes, Strength):
	for _i in range(Shakes):
		var offsetValue = Vector2(rand_range(-Strength, Strength), rand_range(-Strength, Strength))
		position = position + offsetValue * 7
		yield(get_tree(),"idle_frame")
